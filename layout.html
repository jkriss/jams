<!DOCTYPE html>

<!--

  __  .__                                                            .__       ___.
_/  |_|__| ____ ___.__. ______ ______________  __ ___________   ____ |  |  __ _\_ |__
\   __\  |/    <   |  |/  ___// __ \_  __ \  \/ // __ \_  __ \_/ ___\|  | |  |  \ __ \
 |  | |  |   |  \___  |\___ \\  ___/|  | \/\   /\  ___/|  | \/\  \___|  |_|  |  / \_\ \
 |__| |__|___|  / ____/____  >\___  >__|    \_/  \___  >__| /\ \___  >____/____/|___  /
              \/\/         \/     \/                 \/     \/     \/               \/

May the bits
passing through
this server
somehow help to bring
a little more peace to
    this troubled world.

-->

<html>
  <head>
    <meta charset="utf-8">
    <title>jams</title>
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQYV2MQERH5DwABuAE8RBfWTAAAAABJRU5ErkJggg=="></link>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Permanent+Marker" rel="stylesheet">
    <script src="/fetch.min.js" charset="utf-8"></script>
    <script type="text/javascript">
      var match = document.cookie.match(/_acu=([^;]+)/)
      var user = match ? JSON.parse(decodeURIComponent(match[1])) : null
      var loggedIn = !!user
    </script>
  </head>
  <body>
    <header>
      <a class="brand">These are our jams.</a>
      <ul class="actions">
        <li class="if-logged-in"><a href="#" id="new-jam">+ new jam</a></li>
        <li class="if-logged-out"><a href="/login">log in</a></li>
        <li class="if-logged-in"><a href="/logout">log out</a></li>
      </ul>
    </header>
    <main>{{content}}</main>
    <script type="text/javascript">
      var eachSelector = function(selector, fn) {
        [].slice.call(document.querySelectorAll(selector)).forEach(fn)
      }
      eachSelector(loggedIn ? '.if-logged-out' : '.if-logged-in', function(el) {
        el.remove()
      })
    </script>
  </body>
</html>